def p(e):p=range;f=len(e);[(u:=r,i:=n)for r in p(1,f-1)for n in p(1,f-1)if 0<e[r-1][n-1]==e[r-1][n+1]==e[r+1][n-1]==e[r+1][n+1]];return[[e[r][n]|e[(o:=(2*u-r)%f)][n]|e[r][(t:=(2*i-n)%f)]|e[o][t]for n in p(f)]for r in p(f)]