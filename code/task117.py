def p(i):
 l=range;n,n=len(i),len(i[0]);[(a:=e,m:=f)for e in l(1,n-1)for f in l(1,n-1)if i[e-1][f-1]==i[e-1][f+1]==i[e+1][f-1]==i[e+1][f+1]==i[e][f]>0];return[[max(i[e][f],i[(d:=(2*a-e)%n)][f],i[e][(o:=(2*m-f)%n)],i[d][o])for f in l(n)]for e in l(n)]