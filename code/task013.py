def p(t):u,m,o=range,len(t),len(t[0]);t=[t,[*zip(*t)]][m<o];g,i=[f for f in u(len(t))if sum(t[f])];p=2*(g-i);return[[((x:=[f,e][m<o])>=min(g,i))*((x%p==g%p)*sum(t[g])+(x%p==i%p)*sum(t[i]))for e in u(o)]for f in u(m)]