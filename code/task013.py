def p(s):p,l,a=range,len(s),len(s[0]);s=[s,[*zip(*s)]][l<a];r,u=[m for m in p(len(s))if sum(s[m])];t=2*(r-u);return[[((f:=[m,p][l<a])>=min(r,u))*((f%t==r%t)*sum(s[r])+(f%t==u%t)*sum(s[u]))for p in p(a)]for m in p(l)]