def p(s):e=max(s[0],key=s[0].count);r,=[r for a in(s,s[::-1])for n in range(len(s)-2)for f in range(len(s[0])-2)if len(set(r:=[a[n+e//3][f+e%3]for e in range(9)]))>3>0<e!=r[0]!=r[8]];[(t:=lambda r=e,n=e,s=e,*f:[r]*o+[n]*o+[s]*o)(t(r[0]),t(),t(s=r[8]))!=[a[n+e][f:[f+3*o*u,None][f+3*o*u<0]:u]for e in range(3*o)]or exec('for e in range(3*o):a[n+e][f:[f+3*o*u,None][f+3*o*u<0]:u]=t(*r[e//o*3:])')for o in range(4)for u in(1,-1)for n in range(len(s)-3*o+1)for f in range(len(s[0]))for a in(s,s[::-1])];return s