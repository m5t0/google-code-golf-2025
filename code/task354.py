p=lambda g,k=18:g*~k or p([[(k%4<1)*(x==5)*max(v[0],0)or(5==x!=y)*y or x for x,y in zip(v,(0,)+v)]for v in zip(*g[::-1])],k-1)