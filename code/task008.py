def p(g,e=enumerate):h=lambda n:[(i,j)for i,r in e(g)for j,v in e(r)if v==n];a,c=h(2),h(8);u,z=lambda l:[*map(min,zip(*l)),*map(max,zip(*l))],lambda t,b,T,B:(b<T)*(T-b-1)+(B<t)*(B-t+1);y=u(a)+u(c);return[[2*((i-z(*y[::2]),j-z(*y[1::2]))in a)+8*((i,j)in c)for j,w in e(v)]for i,v in e(g)]