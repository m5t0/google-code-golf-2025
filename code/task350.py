def p(g,e=enumerate):f=lambda v:[k for k,x in e(v)if x]or 0;return[[[v[j],8][((a:=f(v))and a[0]<j<a[-1]and v[j]<1)|((b:=f(w))and b[0]<i<b[-1]and w[i]<1)]for j,w in e(zip(*g))]for i,v in e(g)]