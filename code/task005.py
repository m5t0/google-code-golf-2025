def p(g,r=range):f=lambda x:min(i for i in r(19)if min(x[i:i+3]));s,t=f([*map(m:=max,g)]),f([*map(m,zip(*g))]);h=lambda o,x,y:o+4*((x>0)-(x<0))+y;return[[m(g[h(s,x:=(i-s)//4,k//3)][h(t,y:=(j-t)//4,k%3)]for k in r(9))*(g[s+(i-s)%4][t+(j-t)%4]>0)*m(abs(x)==abs(y),x*y==0)for j in r(21)]for i in r(21)]