def p(g):
 for I in range(576):
  if(g,[*zip(*g)])[p:=I//2%2][a:=I//48].count(2)>4:s=a-I%2-2,a+I%2+2;t,n=(s[a<7],k:=I//4%12),(s[a>6],k);g[n[p]][n[~p]],g[t[p]][t[~p]]=g[t[p]][t[~p]],0
 return g