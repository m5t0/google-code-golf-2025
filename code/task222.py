def p(g,e=enumerate):V=sum(g:=[[w[i]*([*v[j-1:j+2],*w[i-1:i+2]].count(w[i])>3)for j,w in e(zip(*g))]for i,v in e(g)],[]);return[[x*(max({*V}-{0},key=V.count)==x)for x in v]for v in g]