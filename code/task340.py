def p(g,e=enumerate):n,m=len(g),len(g[0]);return[[[v[0]*(j==1)*(v[0]in v[1:])+v[-1]*(j==m-2)*(v[-1]in v[:-1])+w[0]*(i==1)*(w[0]in w[1:])+w[-1]*(i==n-2)*(w[-1]in w[:-1]),g[i][j]][min(i,n-1-i,j,m-1-j)<1]for j,w in e(zip(*g))]for i,v in e(g)]