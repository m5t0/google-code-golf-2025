def p(r,e=enumerate):t=[s.__setitem__(o,0)or(u,o,f)for u,s in e(r)for o,f in e(s)if f&7];i,p,s=t[0];[r[u+m-i].__setitem__(o+f-p,s)for u,s in e(r)for o,f in e(s)if f==8for m,f,s in t];return r