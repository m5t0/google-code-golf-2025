f=lambda v,j:[*v[j:],2].index(2)+[*v[j::-1],2].index(2)-1
p=lambda g,e=enumerate:[[w[i]or((a:=sorted({f(v,j)*f(w,i)for j,w in e(zip(*g))for i,v in e(g)if w[i]<1}))[-1]==(x:=f(v,j)*f(w,i)))+(a[0]==x)*8for j,w in e(zip(*g))]for i,v in e(g)]