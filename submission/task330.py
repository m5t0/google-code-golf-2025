p=lambda g:[(l:=0,g:=[[[(t:=a>0)*b|a,t<<(l:=l+1)][a&1]for a,b in zip(r,[*r[1:],0])]for r in zip(*g[::-1])])for _ in g*4]and[[(s>0)+(s.bit_count()==6)for s in r]for r in g]