d=0,1,0,-1
p=lambda g,r=range(10):[[g[i][j]or 4-(f:=lambda n,P:1+sum(f((I,J),n)for i in range(4)if-1<(I:=n[0]+d[i])<10>(J:=n[1]+d[~i])>=0and g[I][J]<1!=(I,J)!=P))(n:=(i,j),n)for j in r]for i in r]