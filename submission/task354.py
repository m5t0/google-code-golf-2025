p=lambda g,k=18:g*~k or p([[x==5and(k%4<1)*v[0]|y*(x!=y)or x for x,y in zip(v,(0,)+v)]for v in zip(*g[::-1])],k-1)