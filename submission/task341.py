f=lambda g:[*zip(*[[v[j]or(u==w)*any(v[j:])*any(v[:j])*8for j in range(10)]for u,v,w in zip([0]+g,g,g[1:]+[0])])];p=lambda g:f(f(g))