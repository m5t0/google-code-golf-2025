def p(g):
 for I in range(288):
  for d in[2,3]*((g,[*zip(*g)])[p:=I%2][a:=I//24].count(2)>4):s=a-d,a+d;t,n=(s[a<7],k:=I//2%12),(s[a>6],k);g[n[p]][n[~p]],g[t[p]][t[~p]]=g[t[p]][t[~p]],0
 return g