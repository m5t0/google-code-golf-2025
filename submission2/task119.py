def p(g):
 for x in-1,1:
  if 8in g[s:=11*(x<0)]:exec("t=g[s].index(8);y=g[s+x].index(8)-t\nwhile-1<(s:=s+x)<12:\n if(v:=g[s])[t+y]==2:y=-y\n if v[t:=t+y]<1:v[t]=3");return g
 return[*zip(*p([*map(list,zip(*g))]))]